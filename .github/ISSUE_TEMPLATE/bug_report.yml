name: Bug Report
description: Report a bug or issue with the DuckDB dplyr extension
title: "[BUG] "
labels: ["bug", "needs-triage"]
assignees: []

body:
  - type: markdown
    attributes:
      value: |
        Thanks for taking the time to report a bug! Please fill out the information below to help us diagnose and fix the issue.

  - type: checkboxes
    id: checklist
    attributes:
      label: Pre-submission Checklist
      description: Please verify these items before submitting
      options:
        - label: I have searched existing issues to ensure this is not a duplicate
          required: true
        - label: I have tested with the latest release version
          required: true
        - label: I have included all relevant information below
          required: true

  - type: textarea
    id: description
    attributes:
      label: Bug Description
      description: A clear and concise description of what the bug is
      placeholder: Describe the bug...
    validations:
      required: true

  - type: textarea
    id: reproduction
    attributes:
      label: Steps to Reproduce
      description: Detailed steps to reproduce the behavior
      placeholder: |
        1. Load the extension with 'LOAD ...'
        2. Execute query 'DPLYR ...'
        3. See error
    validations:
      required: true

  - type: textarea
    id: expected
    attributes:
      label: Expected Behavior
      description: What you expected to happen
      placeholder: Describe what should have happened...
    validations:
      required: true

  - type: textarea
    id: actual
    attributes:
      label: Actual Behavior
      description: What actually happened
      placeholder: Describe what actually happened...
    validations:
      required: true

  - type: textarea
    id: error-message
    attributes:
      label: Error Message
      description: Full error message if applicable
      placeholder: |
        E-SYNTAX: Syntax error at position 15: unexpected token 'invalid'
        Suggestion: Check your dplyr syntax
      render: text

  - type: dropdown
    id: platform
    attributes:
      label: Platform
      description: What platform are you running on?
      options:
        - Linux x86_64
        - macOS x86_64 (Intel)
        - macOS ARM64 (Apple Silicon)
        - Windows x86_64
        - Other (please specify in additional context)
    validations:
      required: true

  - type: input
    id: duckdb-version
    attributes:
      label: DuckDB Version
      description: Output of `duckdb --version`
      placeholder: "v0.10.0 1601d94f94"
    validations:
      required: true

  - type: input
    id: extension-version
    attributes:
      label: Extension Version
      description: Version of the dplyr extension
      placeholder: "v0.1.0"
    validations:
      required: true

  - type: textarea
    id: dplyr-code
    attributes:
      label: dplyr Code
      description: The dplyr code that caused the issue
      placeholder: |
        mtcars %>%
          select(mpg, cyl) %>%
          filter(mpg > 20)
      render: r

  - type: textarea
    id: sql-output
    attributes:
      label: Generated SQL (if applicable)
      description: The SQL that was generated (if the issue is with incorrect SQL generation)
      render: sql

  - type: dropdown
    id: severity
    attributes:
      label: Severity
      description: How severe is this issue?
      options:
        - Low (minor inconvenience)
        - Medium (affects functionality)
        - High (blocks important use cases)
        - Critical (crashes, data corruption, security)
    validations:
      required: true

  - type: dropdown
    id: category
    attributes:
      label: Category
      description: What category does this bug fall into?
      options:
        - Parsing/Syntax
        - SQL Generation
        - Performance
        - Memory/Crashes
        - Error Handling
        - Installation/Loading
        - Documentation
        - Other
    validations:
      required: true

  - type: textarea
    id: additional-context
    attributes:
      label: Additional Context
      description: Any other context about the problem
      placeholder: |
        - Environment variables set
        - Special configuration
        - Related issues
        - Workarounds found

  - type: textarea
    id: logs
    attributes:
      label: Debug Logs
      description: Relevant debug logs (set DPLYR_DEBUG=1 for verbose output)
      render: text

  - type: checkboxes
    id: contribution
    attributes:
      label: Contribution
      description: Are you willing to help fix this issue?
      options:
        - label: I am willing to submit a pull request to fix this issue
        - label: I can help test the fix
        - label: I can provide additional information if needed